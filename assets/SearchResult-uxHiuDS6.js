import{u as I,i as Ee,l as te,m as U,p as ae,P as se,q as le,s as re,k as x,v as k,x as Ae,y as V,j as t,z as oe,R as _,A as Be,B as ie,C as ne,D as ue,E as ce,G as he,H as ge,I as me,J as de,K as q,L as pe,M as ve,N as ye,O,Q as T,S as Ce}from"./app-LZShHywJ.js";const De=["/","/intro.html","/demo/","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/note/","/posts/cherry.html","/posts/dragonfruit.html","/posts/strawberry.html","/posts/tomato.html","/note/computernetwork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html","/note/es/1.Elasticsearch%E5%AD%A6%E4%B9%A0%EF%BC%8C%E8%AF%B7%E5%85%88%E7%9C%8B%E8%BF%99%E4%B8%80%E7%AF%87%EF%BC%81.html","/note/es/2.Elasticsearch%E8%81%9A%E5%90%88%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E2%80%94%E2%80%94%E5%AF%B9%E6%AF%94Mysql%E5%AE%9E%E7%8E%B0%20-%20%E5%89%AF%E6%9C%AC%20(3).html","/note/es/2.Elasticsearch%E8%81%9A%E5%90%88%E6%B7%B1%E5%85%A5%E8%AF%A6%E8%A7%A3%E2%80%94%E2%80%94%E5%AF%B9%E6%AF%94Mysql%E5%AE%9E%E7%8E%B0.html","/note/es/3.ELK.html","/note/es/5.%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%88%B0Elasticsearched.html","/note/es/es%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html","/note/go/gin%E4%BD%BF%E7%94%A8elasticsearch%E5%AE%9E%E7%8E%B0%E5%B8%96%E5%AD%90%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2.html","/note/go/gin%E4%BD%BF%E7%94%A8rabbitMQ%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E5%8F%8C%E5%86%99.html","/note/go/gin%E4%BD%BF%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%85%B1%E5%90%8C%E5%85%B3%E6%B3%A8.html","/note/go/gin%E4%BD%BF%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E5%85%B3%E6%B3%A8%E6%8E%A8%E9%80%81.html","/note/go/go-gin%E4%BD%BF%E7%94%A8redis.html","/note/go/go-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8elasticsearch.html","/note/go/go-%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80.html","/note/java/","/note/java/SpringSecurity.html","/note/java/disable.html","/note/java/juced.html","/note/java/jvmed.html","/note/kafka/kafka%E6%A6%82%E5%BF%B5.html","/note/mysql/B_%E6%A0%91%EF%BC%8C%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%9B%9E%E8%A1%A8.html","/note/mysql/SQL%E6%B3%A8%E5%85%A5.html","/note/mysql/%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%86.html","/note/mysql/%E4%BA%8B%E5%8A%A1%E3%80%81%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E3%80%81MVCC.html","/note/mysql/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html","/note/mysql/%E6%85%A2%E6%9F%A5%E8%AF%A2%EF%BC%8CSQL%E4%BC%98%E5%8C%96.html","/note/redis/1.redis%E7%AE%80%E4%BB%8B.html","/note/redis/10.%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF.html","/note/redis/11.%20Canal%E8%A7%A3%E5%86%B3Mysql%E5%92%8CRedis%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5(TCP).html","/note/redis/12.%20Canal%E8%A7%A3%E5%86%B3Mysql%E5%92%8CRedis%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5(MQ).html","/note/redis/13.%20Canal%E8%A7%A3%E5%86%B3Mysql%E5%92%8CES%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5.html","/note/redis/2.Redis%E7%BC%93%E5%AD%98%EF%BC%88%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E3%80%81%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%EF%BC%89.html","/note/redis/3.Redis%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F-%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8ed.html","/note/redis/4.Redis%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7.html","/note/redis/5.Redis%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%88%E8%90%BD%E7%9B%98%EF%BC%89.html","/note/redis/6.Redis%E9%AB%98%E5%8F%AF%E7%94%A8-%E4%B8%89%E7%A7%8D%E6%96%B9%E6%A1%88.html","/note/redis/7.Redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html","/note/redis/8.%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E3%80%81%E7%A7%92%E6%9D%80%E3%80%81RedLock.html","/note/redis/9.%E6%95%B0%E6%8D%AE%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5%E3%80%81%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html","/note/redis/","/note/redis/page.html","/note/%E5%A4%A7%E6%95%B0%E6%8D%AE/Spark.html","/note/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E5%B9%BF%E5%91%8A%E6%95%B0%E4%BB%93.html","/posts/apple/1.html","/posts/apple/2.html","/posts/apple/3.html","/posts/apple/4.html","/posts/banana/1.html","/posts/banana/2.html","/posts/banana/3.html","/posts/banana/4.html","/note/linux/deepin/docker%E7%AE%80%E5%8D%95%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F.html","/note/linux/deepin/%E5%AE%89%E8%A3%85Go%EF%BC%8C%E9%85%8D%E7%BD%AEVScode.html","/404.html","/posts/","/note/computernetwork/","/note/es/","/note/go/","/note/kafka/","/note/mysql/","/note/%E5%A4%A7%E6%95%B0%E6%8D%AE/","/posts/apple/","/posts/banana/","/note/linux/deepin/","/note/linux/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","/category/%E6%A8%B1%E6%A1%83/","/category/%E7%81%AB%E9%BE%99%E6%9E%9C/","/category/%E6%B0%B4%E6%9E%9C/","/category/%E8%8D%89%E8%8E%93/","/category/%E8%94%AC%E8%8F%9C/","/category/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/category/go/","/category/elasticsearch/","/category/gin%E4%BD%BF%E7%94%A8rabbitmq%E5%AE%9E%E7%8E%B0%E5%BC%82%E6%AD%A5%E5%8F%8C%E5%86%99/","/category/rabbitmq/","/category/java/","/category/spring/","/category/jvm/","/category/kafka%E6%A6%82%E5%BF%B5/","/category/b_%E6%A0%91%EF%BC%8C%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%9B%9E%E8%A1%A8/","/category/mysql/","/category/redis/","/category/%E5%B9%BF%E5%91%8A%E6%95%B0%E4%BB%93/","/category/%E8%8B%B9%E6%9E%9C/","/category/%E9%A6%99%E8%95%89/","/tag/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E7%BA%A2/","/tag/%E5%B0%8F/","/tag/%E5%9C%86/","/tag/%E5%A4%A7/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/tag/elasticsearch/","/tag/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5/","/tag/rabbitmq/","/tag/gin%E4%BD%BF%E7%94%A8redis%E5%AE%9E%E7%8E%B0%E5%85%B1%E5%90%8C%E5%85%B3%E6%B3%A8/","/tag/redis/","/tag/gin%E4%BD%BF%E7%94%A8redis/","/tag/%E5%85%B3%E6%B3%A8%E6%8E%A8%E9%80%81/","/tag/go%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/","/tag/springsecurity/","/tag/jvm/","/tag/kafka%E6%A6%82%E5%BF%B5/","/tag/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/","/tag/b_%E6%A0%91/","/tag/%E7%B4%A2%E5%BC%95/","/tag/%E5%9B%9E%E8%A1%A8/","/tag/sql%E6%B3%A8%E5%85%A5/","/tag/%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%86/","/tag/%E4%BA%8B%E5%8A%A1/","/tag/%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB/","/tag/mvcc/","/tag/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/","/tag/%E6%85%A2%E6%9F%A5%E8%AF%A2%EF%BC%8Csql%E4%BC%98%E5%8C%96/","/tag/redis%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/","/tag/canal/","/tag/mq/","/tag/es/","/tag/%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F/","/tag/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF/","/tag/%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9/","/tag/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/","/tag/%E4%B8%80%E8%87%B4%E6%80%A7/","/tag/%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/","/tag/redis%E6%8C%81%E4%B9%85%E5%8C%96%EF%BC%88%E8%90%BD%E7%9B%98%EF%BC%89/","/tag/redis%E9%AB%98%E5%8F%AF%E7%94%A8-%E4%B8%89%E7%A7%8D%E6%96%B9%E6%A1%88/","/tag/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/","/tag/%E7%A7%92%E6%9D%80/","/tag/redlock/","/tag/%E6%95%B0%E6%8D%AE%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/","/tag/%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5/","/tag/%E9%BB%84/","/tag/%E5%BC%AF%E6%9B%B2%E7%9A%84/","/tag/%E9%95%BF/","/article/","/star/","/timeline/"],Fe="SEARCH_PRO_QUERY_HISTORY",d=I(Fe,[]),ke=()=>{const{queryHistoryCount:a}=q,s=a>0;return{enabled:s,queryHistory:d,addQueryHistory:l=>{s&&(d.value=Array.from(new Set([l,...d.value.slice(0,a-1)])))},removeQueryHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},j=a=>De[a.id]+("anchor"in a?`#${a.anchor}`:""),qe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=q,p=I(qe,[]),fe=()=>{const a=$>0;return{enabled:a,resultHistory:p,addResultHistory:s=>{if(a){const l={link:j(s),display:s.display};"header"in s&&(l.header=s.header),p.value=[l,...p.value.slice(0,$-1)]}},removeResultHistory:s=>{p.value=[...p.value.slice(0,s),...p.value.slice(s+1)]}}},Re=a=>{const s=ue(),l=U(),f=ce(),A=x(0),C=k(()=>A.value>0),h=he([]);return ge(()=>{const{search:g,terminate:R}=me(),v=de(i=>{const y=i.join(" "),{searchFilter:b=c=>c,splitWord:H,suggestionsFilter:L,...m}=s.value;y?(A.value+=1,g(i.join(" "),l.value,m).then(c=>b(c,y,l.value,f.value)).then(c=>{A.value-=1,h.value=c}).catch(c=>{console.warn(c),A.value-=1,A.value||(h.value=[])})):h.value=[]},q.searchDelay-q.suggestDelay);V([a,l],([i])=>v(i),{immediate:!0}),pe(()=>{R()})}),{isSearching:C,results:h}};var He=Ee({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:s}){const l=te(),f=U(),A=ae(se),{enabled:C,addQueryHistory:h,queryHistory:g,removeQueryHistory:R}=ke(),{enabled:v,resultHistory:i,addResultHistory:y,removeResultHistory:b}=fe(),H=C||v,L=le(a,"queries"),{results:m,isSearching:c}=Re(L),r=re({isQuery:!0,index:0}),n=x(0),u=x(0),M=k(()=>H&&(g.value.length>0||i.value.length>0)),Q=k(()=>m.value.length>0),w=k(()=>m.value[n.value]||null),Y=()=>{const{isQuery:e,index:E}=r;E===0?(r.isQuery=!e,r.index=e?i.value.length-1:g.value.length-1):r.index=E-1},G=()=>{const{isQuery:e,index:E}=r;E===(e?g.value.length-1:i.value.length-1)?(r.isQuery=!e,r.index=0):r.index=E+1},K=()=>{n.value=n.value>0?n.value-1:m.value.length-1,u.value=w.value.contents.length-1},z=()=>{n.value=n.value<m.value.length-1?n.value+1:0,u.value=0},J=()=>{u.value<w.value.contents.length-1?u.value+=1:z()},N=()=>{u.value>0?u.value-=1:K()},S=e=>e.map(E=>Ce(E)?E:t(E[0],E[1])),W=e=>{if(e.type==="customField"){const E=ve[e.index]||"$content",[o,F=""]=ye(E)?E[f.value].split("$content"):E.split("$content");return e.display.map(B=>t("div",S([o,...B,F])))}return e.display.map(E=>t("div",S(E)))},D=()=>{n.value=0,u.value=0,s("updateQuery",""),s("close")},X=()=>C?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},A.value.queryHistory),g.value.map((e,E)=>t("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===E}],onClick:()=>{s("updateQuery",e)}},[t(O,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),R(E)}})]))])):null,Z=()=>v?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},A.value.resultHistory),i.value.map((e,E)=>t(_,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===E}],onClick:()=>{D()}},()=>[t(O,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>S(o)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),b(E)}})]))])):null;return Ae("keydown",e=>{if(a.isFocusing){if(Q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const E=w.value.contents[u.value];h(a.queries.join(" ")),y(E),l.push(j(E)),D()}}else if(v){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:E}=r;r.isQuery?(s("updateQuery",g.value[E]),e.preventDefault()):(l.push(i.value[E].link),D())}}}}),V([n,u],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!Q.value:!M.value}],id:"search-pro-results"},a.queries.length?c.value?t(oe,{hint:A.value.searching}):Q.value?t("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:E},o)=>{const F=n.value===o;return t("li",{class:["search-pro-result-list-item",{active:F}]},[t("div",{class:"search-pro-result-title"},e||A.value.defaultTitle),E.map((B,ee)=>{const P=F&&u.value===ee;return t(_,{to:j(B),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(a.queries.join(" ")),y(B),D()}},()=>[B.type==="text"?null:t(B.type==="title"?Be:B.type==="heading"?ie:ne,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[B.type==="text"&&B.header?t("div",{class:"content-header"},B.header):null,t("div",W(B))])])})])})):A.value.emptyResult:H?M.value?[X(),Z()]:A.value.emptyHistory:A.value.emptyResult)}});export{He as default};
